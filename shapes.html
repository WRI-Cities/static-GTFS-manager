<!DOCTYPE html>
<html lang="en">

<head>
	<!-- Required meta tags-->
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
	<title>GTFS Manager : Shapes info</title>
	<!-- Fontfaces CSS-->
	<link href="css/font-face.css" rel="stylesheet" media="all">
	<link href="vendor/font-awesome-5/css/all.min.css" rel="stylesheet" media="all">
	<!-- Bootstrap CSS-->
	<link href="vendor/bootstrap-4.1/bootstrap.min.css" rel="stylesheet" media="all">
	<!-- Maps-->
	<link href="lib/leaflet.css" orig="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css" rel="stylesheet" />
	<link href="lib/easy-button.css" alt="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.css"
		rel="stylesheet" />
	<link href="vendor/Leaflet-pm-2.2.0/leaflet.pm.css" rel="stylesheet" />
	<link href="vendor/Leaflet.markercluster-1.4.1/MarkerCluster.css" rel="stylesheet" />
	<link href="vendor/Leaflet.markercluster-1.4.1/MarkerCluster.default.css" rel="stylesheet" />
	<!-- Vendor CSS-->
	<link href="vendor/wow/animate.css" rel="stylesheet" media="all">
	<link href="vendor/css-hamburgers/hamburgers.min.css" rel="stylesheet" media="all">
	<link href="vendor/slick/slick.css" rel="stylesheet" media="all">
	<link href="vendor/select2/css/select2.min.css" rel="stylesheet" media="all">
	<link href="vendor/select2/css/select2-bootstrap4.min.css" rel="stylesheet" media="all">
	<link href="vendor/toast-0.7.1/toast.min.css" rel="stylesheet" media="all">
	<link href="vendor/tabulator-4.4.3/css/bootstrap/tabulator_bootstrap4.min.css" rel="stylesheet" media="all">
	<script src="vendor/tabulator-4.4.3/js/tabulator.min.js"></script>
	<!-- Main CSS-->
	<link href="css/theme.css" rel="stylesheet" media="all">
	<!-- Put the CSSs first and JSs next -->
	<style>
		#shapes-table {
			height: 350px;
		}

		#map {
			height: 500px;
		}

		.stop-divicon {
			border-radius: 50%;
			color: white;
			padding-top: 2px;
			position: absolute;
			text-align: center;
			overflow: hidden;
			box-shadow: 0px 0px 10px black;
			/*looks 3D! no need of a border*/
			background-color: rgba(0, 0, 255, 0.7);
		}
	</style>
	<script src="config/settings.js" type="text/javascript"></script>
</head>

<body class="page-content--bgf7">
	<div class="page-wrapper">
		<!-- HEADER DESKTOP-->
		<header class="header-desktop3 d-none d-lg-block">
			<div class="section__content section__content--p35">
				<div class="header3-wrap">
					<div class="header__logo">
						<a href="#">
							<img src="extra_files/GTFS.png" width="52" height="170" alt="GTFS Manager" />
						</a>
					</div>
					<div class="header__navbar" id="navmenuinsert">
						<!-- menu will be inserted from menu.js.-->
					</div>
					<div class="form-inline my-2 my-md-0">
						<input id="password" class="form-control mr-sm-2" type="text" placeholder="pw for edits"
							style="width:200px;" id="password">
					</div>
				</div>
			</div>
		</header>
		<!-- END HEADER DESKTOP-->
		<!-- MAIN CONTENT-->
		<div class="page-content--bgf7">
			<div class="section__content section__content--p30">
				<div class="container-fluid p-t-20">
					<div class="row">
						<div class="col-md-12">
							<div class="card">
								<div class="card-header">
									<strong class="card-title mb-3">Shape Management</strong>
								</div>
								<div class="card-body">
									<div class="row">
										<div class="col">
											<div class="form-group row">
												<label for="shape_route" class="col-sm-4 col-form-label">Route</label>
												<div class="col-sm-8">
													<select id="shape_route" class="form-control">
														<option></option>
													</select>
												</div>
											</div>

										</div>
										<div class="col">
											<div class="form-group row">
												<label for="shape_trip" class="col-sm-4 col-form-label">Trip</label>
												<div class="col-sm-8">
													<select id="shape_trip" class="form-control" disabled>
														<option></option>
													</select>
												</div>
											</div>

										</div>
										<div class="col">
											<div class="form-group row">
												<label for="shape_direction"
													class="col-sm-4 col-form-label">Direction</label>
												<div class="col-sm-8">
													<select id="shape_direction" class="form-control" disabled
														aria-placeholder="Select a Route and Trip">
														<option value="">Select a direction</option>
														<option value="0">Onward</option>
														<option value="1">Return</option>
													</select>
												</div>
											</div>
										</div>
										<div class="col">
											<div class="form-group row">
												<label for="shape_shape"
													class="col-sm-4 col-form-label"><b>Shape</b></label>
												<div class="col-sm-8">
													<select id="shape_shape" class="form-control">
														<option></option>
													</select>
												</div>
											</div>

										</div>
									</div>
									<div id="map"></div>
									<div class="btn-toolbar mb-3" role="toolbar"
										aria-label="Toolbar with button groups">
										<div class="btn-group dropup" role="group" id="ToolsButtons">
											<button id="btnGroupDropTools" type="button"
												class="btn btn-secondary dropdown-toggle mx-1" data-toggle="dropdown"
												aria-haspopup="true" aria-expanded="false" title="Tools">
												<i class="fas fa-tools"></i>
											</button>
											<div class="dropdown-menu" aria-labelledby="btnGroupDropTools"
												id="SelectToolsMenu">
												<a class="dropdown-item" href="#" id="openUseRoutingModal"
													data-toggle="modal" data-target="#OnlineRoutingModal">Use online
													routing</a>
												<a class="dropdown-item" href="#" id="openUploadShapeModal"
													data-toggle="modal" data-target="#UploadShapeModal">Upload a shape
													file</a>
											</div>
										</div>
										<div class="input-group">
											<div class="input-group-prepend">
												<div class="input-group-text" id="btnGroupAddon">Save layer</div>
											</div>
											<select id="shape_save" class="form-control">
												<option value="Drawn">Drawn Shape</option>
												<option value="File">Uploaded File</option>
												<option value="Loaded">Loaded Shape</option>
												<option value="Routing">Online Routing</option>
											</select>
										</div>
										<div class="input-group">
											<div class="input-group-prepend">
												<div class="input-group-text" id="btnGroupAddon">Shape_ID:</div>
											</div>
											<input type="text" class="form-control" id="shape_id"
												placeholder="Enter a shape_id" aria-label="Input group example"
												aria-describedby="btnGroupAddon">
										</div>
										<div class="btn-group" role="group" aria-label="Basic example">
											<button type="button" class="btn btn-secondary" id="SaveShapeButton">Save the shape</button>											
										  </div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-12">
							<div class="card">
								<div class="card-header">
									<strong class="card-title mb-3">Shape Table</strong>
								</div>
								<div class="card-body">
									<div id="shapes-table"></div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- END MAIN CONTENT-->
			<!-- END PAGE CONTAINER-->
		</div>
	</div>

	<div class="modal" tabindex="-1" role="dialog" id="OnlineRoutingModal">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Create shape based on stops in journey.</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div class="form-group row">
						<label for="UseService" class="col-sm-6 col-form-label">Use Online routing Service:</label>
						<div class="col-sm-6">
							<select id="RoutingUseService" class="form-control">
								<option value="Mapbox">Mapbox Directions API</option>
								<option value="OSRM">OSRM</option>
								<option value="GraphHopper">GraphHopper</option>
								<option value="TomTom">TomTom Online Routing API</option>
								<option value="Here">Here Routing API</option>
							</select>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					<button type="button" class="btn btn-primary" id="OnlineRoute">Try to route!</button>
				</div>
			</div>
		</div>
	</div>
	<!-- The Modals -->
	<div class="modal" tabindex="-1" role="dialog" id="UploadShapeModal">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Upload a shape</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div class="container-fluid">
						<div class="row">
							<div class="col-md-12">
								<div class="alert alert-primary" role="alert">
									Upload a shapefile (.geojson format): <a href="xml_related/R001.geojson"
										target="_blank">see sample</a>
									Don't have a shapefile in .geojson format? You can convert or create one here: <a
										href="http://geojson.io" target="_blank">geojson.io</a>
									Filesupport:
									<ul>
										<li>.geojson</li>
										<li>.kml</li>
										<li>.gpx</li>
									</ul>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-md-12">
								<div class="form-group row">
									<label for="uploadShape0" class="col-sm-2 col-form-label">Shape File</label>
									<div class="col-sm-10">
										<input type="file" id="uploadShape" name="uploadShape" class="form-control"
											accept=".geojson,.kml,.gpx">
											<small id="uploadShapeHelp" class="form-text text-muted">Support for: .geojson, .kml, gpx</small>
									</div>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-md-12">
									<div class="form-group row">
											<label for="FoundLayers" class="col-sm-2 col-form-label">Found Layers:</label>
											<div class="col-sm-10" id="FoundLayers">
												
											</div>
										</div>

								</div>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					<button id="uploadShapeButton" class="btn btn-primary">Upload</button>
					<button id="uploadLayerButton" class="btn btn-primary">Use Selected Layers</button>
				</div>
			</div>
		</div>
	</div>
	<!-- End The Modal -->
	<!-- Jquery JS-->
	<script src="vendor/jquery-3.2.1.min.js"></script>
	<!-- Bootstrap JS-->
	<script src="vendor/bootstrap-4.1/popper.min.js"></script>
	<script src="vendor/bootstrap-4.1/bootstrap.min.js"></script>
	<!-- Vendor JS       -->
	<script src="vendor/circle-progress/circle-progress.min.js"></script>
	<script src="vendor/perfect-scrollbar/perfect-scrollbar.js"></script>
	<script src="vendor/chartjs/Chart.bundle.min.js"></script>
	<script src="vendor/select2/js/select2.min.js"></script>
	<script src="vendor/toast-0.7.1/toast.min.js"></script>
	<script src="js/tabulator-footer.js"></script>
	<!-- Leaflet Maps -->
	<script src="lib/leaflet.js"></script>
	<script src="lib/easy-button.js" alt="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.js"></script>
	<script src="vendor/leaflet-providers-1.8.0/leaflet-providers.js" type="text/javascript"></script>
	<script src="vendor/Leaflet.markercluster-1.4.1/leaflet.markercluster.js" type="text/javascript"></script>
	<script src="vendor/leaflet-pm-2.2.0/leaflet.pm.min.js" type="text/javascript"></script>
	<script src="vendor/leaflet-routing-machine-3.2.12/leaflet-routing-machine.min.js" type="text/javascript"></script>
	<!-- GraphHopper routing -->
	<script src="vendor/lrm-graphhopper-1.2.0/lrm-graphhopper-1.2.0.min.js" type="text/javascript"></script>
	<!-- TomTom routing -->
	<script src="vendor/lrm-tomtom-1.0.4/lrm-tomtom.min.js" type="text/javascript"></script>
	<!-- Here Routing -->
	<script src="vendor/lrm-Here-1.3.2/lrm-here.min.js" type="text/javascript"></script>
	<script src="vendor/polyline-1.1.0/polyline.js"></script>
	<script src="vendor/togeojson/togeojson.js"></script>
	<!-- Form validator-->
	<script src="vendor/parsley-2.9.1/parsley.min.js"></script>

	<!-- Main JS-->
	<script src="js/main.js"></script>
	<script src="js/menu.js"></script>

	<script src="js/commonfuncs.js" type="text/javascript"></script>
	<script src="js/shapes.js"></script>


</body>

</html>